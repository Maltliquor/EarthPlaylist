<!DOCTYPE html>
<html>
<head>
    <title>Big Big World</title>
    <style>canvas { width: 100%; height: 100% }</style>
    <script src="js/three.min.js"></script>
	<script src="js/controls/OrbitControls.js"></script>
</head>
<body>
    <script>
        var scene = new THREE.Scene();       
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);        
        var renderer = new THREE.WebGLRenderer();
        
        renderer.setSize(window.innerWidth, window.innerHeight);        
        document.body.appendChild(renderer.domElement);
		
		scene.add(new THREE.AmbientLight(0x333333));
		
		function updateControls(){
            controls.update();         
		}

		var controls = new THREE.OrbitControls( camera, renderer.domElement );
        controls.addEventListener( 'change', updateControls );
		controls.enableZoom = false;
		//Lighting
		var light = new THREE.DirectionalLight(0xffffff, 1);
		light.position.set(5, 3, 5);
		scene.add(light);
		
        var geometry = new THREE.SphereGeometry(0.5, 32, 32);
        var material = new THREE.MeshPhongMaterial();
        var earthMesh = new THREE.Mesh(geometry, material); 
		scene.add(earthMesh);
			
		material.map = THREE.ImageUtils.loadTexture("images/earthmap1k.jpg");
		material.bumpMap = THREE.ImageUtils.loadTexture("images/earthbump1k.jpg");
		material.bumpScale = 0.05;
		material.specularMap = THREE.ImageUtils.loadTexture("images/earthspec1k.jpg");
		material.specular = new THREE.Color("grey");

		//Clouds
		geometry = new THREE.SphereGeometry(0.51, 32, 32)
		material = new THREE.MeshPhongMaterial();
		material.alphaMap = THREE.ImageUtils.loadTexture("images/cloud.jpg");
		material.side = THREE.DoubleSide;
		material.opacity = 0.8;
		material.transparent = true;
		material.depthWrite = false;
		var cloudMesh = new THREE.Mesh(geometry, material);
		earthMesh.add(cloudMesh);

		//Star field
		geometry = new THREE.SphereGeometry(3, 32, 32);
		material = new THREE.MeshBasicMaterial();
		material.map = THREE.ImageUtils.loadTexture("images/galaxy_starfield.png");
		material.side = THREE.BackSide;
		var mesh = new THREE.Mesh(geometry, material);
		scene.add(mesh);
		/*
		onRenderFcts.push(function(delta, now){
			earthMesh.rotation.y  += 1/32 * delta
		})
		onRenderFcts.push(function(delta, now){
			cloudMesh.rotation.y  += 1/16 * delta
		})*/
        camera.position.z = 1.5;
        function render() {
            earthMesh.rotation.y += 0.0005;
  			cloudMesh.rotation.y += 0.00025;
			requestAnimationFrame(render);
            renderer.render(scene, camera);
        }
        render();
    </script>
</body>
</html>